/**
 * File:
 *  userSave.ycp
 *
 * Module:
 *  Users configurator
 *
 * Summary:
 *  Saving user tests.
 *
 * Authors:
 *  Jiri Srain <jsrain@suse.cz>
 *
 * $Id$
 *
 */

{
    global define UI::OpenDialog(term t)``{}
    global define UI::CloseDialog()``{}
    global define term UI::UserInput()``{return `lprng ;}
    global define UI::SetConsoleFont (string console_magic, string font, string screen_map, string unicode_map, string encoding) ``{}
    global define UI::Recode (string s1, string s2, string s) ``{return s;}

    include "testsuite.ycp";
    import "Pkg";
    import "UserWriteStack";

    map user = $["create_home":true,
	"forename":"",
	"fullname":"",
	"gid":100,
	"grouplist":"dialout,uucp,video,audio",
	"home":"/home/aaa",
	"org_home":"/home/aaa",
	"password":"$1$T8$yEI1SH.1b0jqeqDq6bHha1",
	"shadow":$["inact":-1, "max":99999, "min":0, "warn":7],
	"shell":"/bin/bash",
	"surname":"",
	"uid":500,
	"username":"aaa",
	"what":`add_user];

    TEST(``(UserWriteStack::UserSave (user, false)), [], 0);
    DUMP (sformat ("%1", UserWriteStack::write_to_system_stack));
    DUMP ("==========================================================");

    user = $["create_home":false,
	"forename":"",
	"fullname":"",
	"gid":100,
	"grouplist":"dialout,uucp,video,audio",
	"home":"/home/aaa",
	"org_home":"/home/aaa",
	"password":"$1$T8$yEI1SH.1b0jqeqDq6bHha1",
	"shadow":$["inact":-1, "max":99999, "min":0, "warn":7],
	"shell":"/bin/bash",
	"surname":"",
	"uid":500,
	"username":"aaa",
	"what":`add_user];
    TEST(``(UserWriteStack::UserSave (user, false)), [], 0);
    DUMP (sformat ("%1", UserWriteStack::write_to_system_stack));
}
